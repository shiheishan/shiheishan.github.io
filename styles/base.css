.subject-card {
  margin-bottom: 1rem;
}

.task-item {
  margin-left: 1.25rem;
}

/* homework minimal styles */
.subject-card { background: #fff; border-radius: 16px; padding: 16px 20px; box-shadow: 0 4px 16px rgba(0,0,0,.06); margin: 16px 12px; }
.subject-title { margin: 0 0 8px; font-size: 20px; font-weight: 700; color: #1d1d1f; }
.task-list { margin: 0; padding-left: 1.2em; color: #1d1d1f; }
.task-item { margin: 4px 0; list-style: disc; }
/* Homework namespace (避免与旧站样式冲突) */
#homework-root { padding: 0 8px 96px; } /* 预留底部空间给进度环 */
.hw-card { background:#fff; border-radius:16px; padding:16px 20px; box-shadow:0 4px 16px rgba(0,0,0,.06); margin:16px 12px; }
.hw-title { margin:0 0 8px; font-size:20px; font-weight:700; color:#1d1d1f; }
.hw-list { margin:0; padding-left: 1.2em; color:#1d1d1f; }
.hw-item { margin:6px 0; list-style: disc; }
.hw-error { color:#d00; padding:12px 16px; background:#fff3f3; border-radius:12px; margin:12px; }

/* 如果旧样式仍在，避免误命中（保险条款） */
#homework-root .task-item::before,
#homework-root .task-item::after { content:none !important; display:none !important; }
/* homework namespace */
#homework-root { padding: 0 8px 96px; }
.hw-card { background:#fff; border-radius:16px; padding:16px 20px; box-shadow:0 4px 16px rgba(0,0,0,.06); margin:16px 12px; }
.hw-title { margin:0 0 8px; font-size:20px; font-weight:700; color:#1d1d1f; }
.hw-list { margin:0; padding-left:1.2em; color:#1d1d1f; }
.hw-item { margin:6px 0; list-style: disc; }
.hw-error { color:#d00; padding:12px 16px; background:#fff3f3; border-radius:12px; margin:12px; }

/* 一键隐藏旧视图（不影响 #homework-root 内部） */
[data-hide-legacy-subjects] .subject-card,
[data-hide-legacy-subjects] #subjects-root,
[data-hide-legacy-subjects] [data-role="subjects"],
[data-hide-legacy-subjects] .subjects,
[data-hide-legacy-subjects] .subject-list {
  display: none !important;
}
/* stylelint-disable no-descending-specificity */
/* Homework namespace */
#homework-root { padding: 0 8px 96px; }
.hw-card { background:#fff; border-radius:16px; padding:16px 20px; box-shadow:0 4px 16px rgba(0,0,0,.06); margin:16px 12px; }
.hw-title { margin:0 0 8px; font-size:20px; font-weight:700; color:#1d1d1f; }
.hw-list { margin:0; padding:0; list-style:none; }
.hw-item { display:flex; align-items:flex-start; gap:12px; margin:10px 0; }
.hw-text { position:relative; color:#1d1d1f; }

/* 圆形可勾选 + 删除线动效（iOS 感） */
:root{ --hw-dur-fast:160ms; --hw-dur-mid:260ms; --hw-ease:cubic-bezier(.22,.61,.36,1); --hw-done:#28a745; --hw-border:#d2d2d7; --hw-strike:rgba(0,0,0,.5); }
.hw-check{ width:22px;height:22px;border-radius:50%;border:2px solid var(--hw-border); background:#fff; position:relative; flex:0 0 22px; margin-top:2px;
  transition: border-color var(--hw-dur-fast) var(--hw-ease), background-color var(--hw-dur-fast) var(--hw-ease); }
.hw-check::after{ content:""; position:absolute; inset:4px; border-right:2px solid #fff; border-bottom:2px solid #fff; transform:rotate(45deg) scale(0); transform-origin:center; transition:transform var(--hw-dur-fast) var(--hw-ease); }
.hw-item.hw-done .hw-check{ background:var(--hw-done); border-color:var(--hw-done); }
.hw-item.hw-done .hw-check::after{ transform:rotate(45deg) scale(1); }
.hw-text::after{ content:""; position:absolute; left:0; right:0; top:0.9em; height:1px; background:var(--hw-strike); transform:scaleX(0); transform-origin:left; transition:transform var(--hw-dur-mid) var(--hw-ease); }
.hw-item.hw-done .hw-text{ color:var(--hw-strike); }
.hw-item.hw-done .hw-text::after{ transform:scaleX(1); }

/* 进度环（若页面已有旧样式，此处仅做兜底） */
#progress-ring{ width:96px;height:96px; display:grid; place-items:center; }
#progress-ring .hw-ring{ width:96px;height:96px;border-radius:50%; background:conic-gradient(#e5e7eb 0deg,#e5e7eb 360deg);
  -webkit-mask:radial-gradient(farthest-side,#0000 68%,#000 70%); mask:radial-gradient(farthest-side,#0000 68%,#000 70%); }
#progress-ring .hw-ring-label{ position:absolute; font-weight:700; }
/* Homework namespace */
#homework-root { padding: 0 8px 110px; } /* 给底部进度环留空 */
.hw-card  { background:#fff; border-radius:16px; padding:16px 20px; box-shadow:0 4px 16px rgba(0,0,0,.06); margin:16px 12px; }
.hw-title { margin:0 0 8px; font-size:20px; font-weight:700; color:#1d1d1f; }
.hw-list  { margin:0; padding:0; list-style:none; }
.hw-item  { display:flex; align-items:flex-start; gap:12px; margin:10px 0; will-change:transform; }
.hw-text  { position:relative; color:#1d1d1f; }

/* 勾选圆形：防变形的关键重置 */
:root{ --hw-size:22px; --hw-dur-fast:160ms; --hw-dur-mid:260ms; --hw-ease:cubic-bezier(.22,.61,.36,1); --hw-done:#22c55e; --hw-border:#d2d2d7; --hw-strike:rgba(0,0,0,.55); }
.hw-check{
  appearance:none; -webkit-appearance:none; padding:0; margin-top:2px;
  width:var(--hw-size); height:var(--hw-size); aspect-ratio:1 / 1;
  border-radius:999px; border:2px solid var(--hw-border); background:#fff;
  display:inline-grid; place-items:center; box-sizing:border-box; line-height:0; cursor:pointer;
  transition:border-color var(--hw-dur-fast) var(--hw-ease), background-color var(--hw-dur-fast) var(--hw-ease), transform var(--hw-dur-fast) var(--hw-ease);
}
.hw-check::after{
  content:""; width:10px; height:6px; border-left:2px solid #fff; border-bottom:2px solid #fff;
  transform:rotate(-45deg) scale(0); transform-origin:left bottom; transition:transform var(--hw-dur-fast) var(--hw-ease);
}
.hw-item.hw-done .hw-check{ background:var(--hw-done); border-color:var(--hw-done); }
.hw-item.hw-done .hw-check::after{ transform:rotate(-45deg) scale(1); }

/* 删除线过渡 */
.hw-text::after{
  content:""; position:absolute; left:0; right:0; top:0.9em; height:1px; background:var(--hw-strike);
  transform:scaleX(0); transform-origin:left; transition:transform var(--hw-dur-mid) var(--hw-ease);
}
.hw-item.hw-done .hw-text{ color:var(--hw-strike); }
.hw-item.hw-done .hw-text::after{ transform:scaleX(1); }

/* FLIP 过渡 */
.hw-moving{ transition: transform var(--hw-dur-mid) var(--hw-ease), opacity var(--hw-dur-mid) var(--hw-ease); }

/* 甜甜圈示图 + 数字（含动画兜底） */
#progress-ring{ width:96px; height:96px; display:grid; place-items:center; }
#progress-ring .hw-ring{
  width:96px; height:96px; border-radius:50%;
  background:conic-gradient(#e5e7eb 0deg, #e5e7eb 360deg);
  -webkit-mask:radial-gradient(farthest-side,#0000 68%,#000 70%);
          mask:radial-gradient(farthest-side,#0000 68%,#000 70%);
}
#progress-ring .hw-ring-label{ position:absolute; font-weight:700; font-size:18px; }

/* —— 取消内层滚动，仅保留页面滚动 —— */
#subjects, .panel__body { max-height: none; overflow: visible; -webkit-overflow-scrolling: auto; }

/* —— 任务项可点区域（label 包裹）—— */
.task { list-style: none; }
.task__label { display: flex; align-items: center; gap: .75rem; cursor: pointer; user-select: none; }
.task__input { position: absolute; opacity: 0; width: 0; height: 0; }
.task__box { width: 22px; height: 22px; border: 2px solid var(--border, #d2d2d7); border-radius: 50%; display: inline-block; position: relative; transition: border-color .2s, background .2s; flex: 0 0 22px; }
.task__input:checked + .task__box { background: var(--checked-color, #28a745); border-color: var(--checked-color, #28a745); }
.task__input:checked + .task__box::after { content: ""; position: absolute; left: 6px; top: 2px; width: 6px; height: 12px; border: solid #fff; border-width: 0 2px 2px 0; transform: rotate(45deg); }
.task__text { color: var(--text, #1d1d1f); transition: color .2s, text-decoration-color .2s; }
.task__input:checked + .task__box + .task__text { color: var(--muted-text, #6e6e73); text-decoration: line-through; text-decoration-thickness: 2px; text-decoration-color: rgba(0,0,0,.35); }

/* —— 时间卡片 —— */
.time-card{
  background:#fff; border-radius:16px; padding:12px 16px; margin:12px auto 2px;
  box-shadow:0 6px 20px rgba(0,0,0,.08); text-align:center; font-weight:700; color:#1d1d1f;
}
.time-card .time{ font-size:20px; }
.time-card .date{ font-size:14px; color:#6e6e73; }

/* —— 时间卡片（与现有卡片风格一致） —— */
#clock-root { padding: 0 8px; }
.clock-card {
  background:#fff; border-radius:16px; padding:12px 16px; margin:12px 12px 2px;
  box-shadow:0 6px 20px rgba(0,0,0,.08); text-align:center; font-weight:700; color:#1d1d1f;
}

/* —— Homework namespace（强化选择器，避免被旧样式覆盖） —— */
#homework-root { padding: 0 8px 110px; }
#homework-root .hw-card  { background:#fff; border-radius:16px; padding:16px 20px; box-shadow:0 4px 16px rgba(0,0,0,.06); margin:16px 12px; }
#homework-root .hw-title { margin:0 0 8px; font-size:20px; font-weight:700; color:#1d1d1f; }
#homework-root .hw-list  { margin:0; padding:0; list-style:none; }
#homework-root .hw-item  { display:flex; align-items:flex-start; gap:12px; margin:10px 0; will-change:transform; transition:transform 260ms cubic-bezier(.22,.61,.36,1); }
#homework-root .hw-text  { position:relative; color:#1d1d1f; }

:root{ --hw-size:22px; --hw-done:#22c55e; --hw-border:#d2d2d7; --hw-strike:rgba(0,0,0,.55); }
#homework-root .hw-check{
  appearance:none; -webkit-appearance:none; padding:0; margin-top:2px;
  width:var(--hw-size); height:var(--hw-size); aspect-ratio:1/1;
  border-radius:999px; border:2px solid var(--hw-border); background:#fff;
  display:inline-grid; place-items:center; box-sizing:border-box; line-height:0; cursor:pointer;
  transition:border-color 160ms cubic-bezier(.22,.61,.36,1), background-color 160ms cubic-bezier(.22,.61,.36,1);
}
#homework-root .hw-check::after{
  content:""; width:10px; height:6px; border-left:2px solid #fff; border-bottom:2px solid #fff;
  transform:rotate(-45deg) scale(0); transform-origin:left bottom; transition:transform 160ms cubic-bezier(.22,.61,.36,1);
}
#homework-root .hw-item.hw-done .hw-check{ background:var(--hw-done); border-color:var(--hw-done); }
#homework-root .hw-item.hw-done .hw-check::after{ transform:rotate(-45deg) scale(1); }

/* —— 未完成任务蓝点 —— */
#homework-root .hw-check{ border:none; background:transparent; }
#homework-root .hw-check::before{
  content:""; width:8px; height:8px; border-radius:50%; background:#0a84ff; display:block;
}
#homework-root .hw-item.hw-done .hw-check{ background:var(--hw-done); border-color:var(--hw-done); }
#homework-root .hw-item.hw-done .hw-check::before{ display:none; }

/* —— 删除线动画（提高优先级，防丢失） —— */
#homework-root .hw-text::after{
  content:""; position:absolute; left:0; right:0; top:0.9em; height:1px; background:var(--hw-strike);
  transform:scaleX(0); transform-origin:left; transition:transform 260ms cubic-bezier(.22,.61,.36,1);
}
#homework-root .hw-item.hw-done .hw-text{ color:var(--hw-strike); }
#homework-root .hw-item.hw-done .hw-text::after{ transform:scaleX(1); }

/* —— 甜甜圈示图（兜底样式） —— */
#progress-ring{ width:96px;height:96px; display:grid; place-items:center; }
#progress-ring .hw-ring{
  width:96px;height:96px;border-radius:50%;
  background:conic-gradient(#e5e7eb 0deg,#e5e7eb 360deg);
  -webkit-mask:radial-gradient(farthest-side,#0000 68%,#000 70%);
          mask:radial-gradient(farthest-side,#0000 68%,#000 70%);
}
#progress-ring .hw-ring-label{ position:absolute; font-weight:700; font-size:18px; }
/* —— 取消内层滚动，仅保留页面滚动 —— */
#subjects, .panel__body { max-height: none; overflow: visible; -webkit-overflow-scrolling: auto; }

/* —— 任务项可点区域（label 包裹）—— */
.task { list-style: none; }
.task__label { display: flex; align-items: center; gap: .75rem; cursor: pointer; user-select: none; }
.task__input { position: absolute; opacity: 0; width: 0; height: 0; }
.task__box { width: 22px; height: 22px; border: 2px solid var(--border, #d2d2d7); border-radius: 50%; display: inline-block; position: relative; transition: border-color .2s, background .2s; flex: 0 0 22px; }
.task__input:checked + .task__box { background: var(--checked-color, #28a745); border-color: var(--checked-color, #28a745); }
.task__input:checked + .task__box::after { content: ""; position: absolute; left: 6px; top: 2px; width: 6px; height: 12px; border: solid #fff; border-width: 0 2px 2px 0; transform: rotate(45deg); }
.task__text { color: var(--text, #1d1d1f); transition: color .2s, text-decoration-color .2s; }
.task__input:checked + .task__box + .task__text { color: var(--muted-text, #6e6e73); text-decoration: line-through; text-decoration-thickness: 2px; text-decoration-color: rgba(0,0,0,.35); }
