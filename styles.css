/* ===== iOS 拟物，白色背景（无流动背景），删除线回调为半黑 ===== */
:root{
  --bg:#f5f5f7;
  --ink:#1d1d1f;
  --muted:#6e6e73;
  --accent:#34c759;
  --border:#d2d2d7;
  --strike: rgba(0,0,0,.55); /* 删除线半黑（回调） */
  --card:#ffffffee;
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0f1115;
    --ink:#f2f2f7; --muted:#a1a1a6; --border:#2c2c2e;
    --card:#0f1115e6; --strike:rgba(255,255,255,.5);
  }
}

*{ box-sizing:border-box; }
html, body{ height:100%; }
body{
  margin:0; color:var(--ink);
  font:16px/1.6 -apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",system-ui,"Helvetica Neue",Segoe UI,Arial;
  background: var(--bg);
  overflow-x:hidden;
}

.wrap{ min-height:100%; display:grid; place-items:center; padding:32px; }

/* 时间卡片（可留玻璃风格，也可换为纯白卡片） */
.date-card{
  background: #fff;
  border:1px solid var(--border); border-radius:16px; padding:14px 18px;
  box-shadow: 0 8px 18px rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.7);
  display:flex; align-items:center; justify-content:center;
  font-weight:700; letter-spacing:.5px; font-size:20px; color:var(--ink);
}

/* 内容布局 */
.content{ margin-top:18px; }

/* 学科卡片（回归白卡片风格） */
.subject{
  background: #fff;
  border:1px solid var(--border); border-radius:18px;
  box-shadow: 0 6px 16px rgba(0,0,0,.06), inset 0 1px 0 rgba(255,255,255,.4);
  padding:14px 16px; margin-bottom:14px;
}
.subject-title{ font-weight:700; font-size:18px; margin:2px 0 8px; letter-spacing:.2px; }
.tasks{ margin:0; padding:0; list-style:none; }

/* ===== 任务行（自定义勾选 + 渐进删除线 + 文字半透明） ===== */
@property --p{ syntax: '<number>'; initial-value: 0; inherits: false; }

.task{ display:flex; align-items:center; gap:12px; padding:10px 6px; border-radius:12px; position:relative; }
.task:hover{ background:linear-gradient(180deg, rgba(0,0,0,.04), transparent); }

.task input{ position:absolute; opacity:0; pointer-events:none; }

/* 自定义方框（iOS风） */
.checkbox{
  width:22px; height:22px; border-radius:8px; border:1px solid var(--border);
  background:linear-gradient(180deg,#fff,#f3f4f6);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.8);
  display:inline-grid; place-items:center; flex:0 0 22px; position:relative; overflow:hidden;
}
.checkbox::after{
  content:""; position:absolute; left:5px; top:11px; width:12px; height:6px;
  border-left:3px solid var(--accent); border-bottom:3px solid var(--accent);
  transform: rotate(-45deg) scale(0); transform-origin: left bottom;
  transition: transform .28s cubic-bezier(.2,.9,.3,1.5);
}

/* 文本渐隐 + 删除线推进（回调为原来的方向/配色） */
.text{
  position:relative; font-size:16px; letter-spacing:.2px; line-height:1.4;
  color:transparent; -webkit-background-clip:text; background-clip:text;
  background-image: linear-gradient(90deg,
    rgba(0,0,0,.55) 0%,
    rgba(0,0,0,.55) calc((var(--p)*100% - 2%)),
    rgba(0,0,0,1) calc(var(--p)*100%),
    rgba(0,0,0,1) 100%
  );
  transition: --p .42s ease;
}
.text::after{
  content:""; position:absolute; left:0; right:0; top:50%; height:2px; border-radius:2px; background:var(--strike);
  transform: translateY(-50%) scaleX(var(--p)); transform-origin: left center; transition: transform .42s ease;
}

/* 状态联动 */
.task input:checked ~ .checkbox::after{ transform: rotate(-45deg) scale(1); }
.task input:checked ~ .text{ --p: 1; }
.task input:not(:checked) ~ .text{ --p: 0; }

/* 侧栏：甜甜圈卡片 */
.aside{ position:relative; background:#fff; border:1px solid var(--border); border-radius:18px; padding:18px;
  box-shadow: 0 6px 16px rgba(0,0,0,.08), inset 0 1px 0 rgba(255,255,255,.4); }
.aside h3{ margin:2px 0 12px; font-size:16px; font-weight:700; color:var(--muted); }

.donut{ width:100%; display:grid; place-items:center; }
.donut svg{ width:min(260px, 70vw); height:auto; }
.donut .pct{ font-weight:800; font-size:26px; text-anchor:middle; dominant-baseline: central; }

/* 完成屏 */
.done-screen{ position:absolute; inset:0; display:none; align-items:center; justify-content:center; text-align:center; padding:24px; }
.show-done .done-screen{ display:flex; }
.done-screen .card{ background:#fff; border:1px solid var(--border); border-radius:22px; padding:28px 22px; box-shadow:0 12px 26px rgba(0,0,0,.12), inset 0 1px 0 rgba(255,255,255,.5); }
.done-screen h1{ margin:0 0 6px; font-size:22px; }
.done-screen p{ margin:0; color:var(--muted); }

/* 小提示 */
.hint{ margin:10px 0 0; font-size:12px; color:var(--muted); }



/* ==== layout fix: make cards use full width with sane gutters ==== */
:root{
  /* container uses 12px side gutters on phones, caps at 760px on wide screens */
  --container: min(760px, calc(100vw - 24px));
}

.wrap{
  /* drop grid centering that squeezes children; use a vertical stack */
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:20px 12px;
}

.date-card,
.content > section{
  width: var(--container);
  margin-left:auto;
  margin-right:auto;
}

.subject{
  width: 100%; /* make each card fill the container width */
}
